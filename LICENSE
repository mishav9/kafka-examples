pipeline {
    agent any
    parameters {
        // Add other parameters if needed
        string(name: 'FRUITS', defaultValue: 'Apple', description: 'Select a fruit', trim: true)
        activeChoiceReactiveReference(name: 'CHOICE', description: 'Select a color', referencedParameter: 'FRUITS', script: '''
            import groovy.json.JsonSlurper

            def colorsMap = [
                'Apple': ['Red', 'Green'],
                'Banana': ['Yellow'],
                'Orange': ['Orange'],
                'Grapes': ['Purple', 'Green'],
                'Kiwi': ['Green', 'Brown'],
            ]

            def fruit = FRUITS ?: 'Apple'
            def colors = colorsMap[fruit] ?: []

            return colors.join('\\n')
        ''')
    }
    stages {
        stage('Example Stage') {
            steps {
                echo "Selected Fruit: ${params.FRUITS}"
                echo "Selected Color: ${params.CHOICE}"
                // Your other build steps go here
            }
        }
    }
}
